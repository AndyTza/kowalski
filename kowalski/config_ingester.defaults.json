{
  "server": {
    "name": "Kowalski",
    "version": "2.0.0dev",
    "description": "Kowalski: a toolkit for Time-Domain Astronomy",
    "environment": "production",
    "host": "0.0.0.0",
    "port": "4000"
  },

  "path": {
    "path_app": "/app",
    "path_docs": "/app/docs",
    "path_ml_models": "/app/models/",
    "path_logs": "/data/logs/",
    "path_data": "/data",
    "path_alerts": "/data/alerts",
    "path_queries": "/data/queries",
    "path_tess": "/data/tess",
    "path_tmp": "/_tmp",
    "path_kafka": "/kafka_2.13-2.5.0"
  },

  "kafka": {
    "default.topic.config": {
      "auto.offset.reset": "earliest"
    },
    "group": "kowalski"
  },

  "database": {
    "max_pool_size": 2000,
    "host": "kowalski_mongo_1",
    "port": 27017,
    "db": "kowalski",
    "collection_users": "users",
    "collection_filters": "filters",
    "collection_queries": "queries",
    "collection_alerts_ztf":  "ZTF_alerts",
    "collection_alerts_ztf_aux":  "ZTF_alerts_aux",
    "collection_alerts_zuds":  "ZUDS_alerts",
    "collection_alerts_zuds_aux":  "ZUDS_alerts_aux"
  },

  "indexes": {
    "ZTF_alerts": {
      "radec_candid": [["coordinates.radec_geojson", "2dsphere"],
                       ["candid", -1]],
      "radec_objectId": [["coordinates.radec_geojson", "2dsphere"],
                         ["objectId", -1]],
      "jd_radec_candid": [["candidate.jd", 1],
                   ["coordinates.radec_geojson", "2dsphere"],
                   ["candid", -1]],
      "jd_radec_objectId": [["candidate.jd", 1],
                   ["coordinates.radec_geojson", "2dsphere"],
                   ["objectId", -1]],
      "objectId": [["objectId", -1]],
      "candid": [["candid", -1]],
      "pid": [["candidate.pid", 1]],
      "objectId_pid": [["objectId", -1],
                       ["candidate.pid", 1]],
      "pdiffimfilename": [["candidate.pdiffimfilename", 1]],
      "jd_programid_programpi": [["candidate.jd", 1],
                                 ["candidate.programid", 1],
                                 ["candidate.programpi", 1]],
      "jd_braai_candid": [["candidate.jd", -1],
                          ["classifications.braai", -1],
                          ["candid", -1]],
      "jd_drb_candid": [["candidate.jd", -1],
                        ["candidate.drb", -1],
                        ["candid", -1]],
      "jd_braai_magpsf_isdiffpos_ndethist": [["candidate.jd", 1],
                                             ["classifications.braai", 1],
                                             ["candidate.magpsf", 1],
                                             ["candidate.isdiffpos", 1],
                                             ["candidate.ndethist", 1]],
      "jd_field_drb_ndethhist_magpsf_isdiffpos_objectId": [["candidate.jd", 1],
                                                           ["candidate.field", 1],
                                                           ["candidate.rb", 1],
                                                           ["candidate.drb", 1],
                                                           ["candidate.ndethist", 1],
                                                           ["candidate.magpsf", 1],
                                                           ["candidate.isdiffpos", 1],
                                                           ["objectId", -1]]
    }
  },

  "filters": {
    "ZTF_alerts": [
      {"$match": {"candid": null}},
      {"$project": {"cutoutScience": 0, "cutoutTemplate": 0, "cutoutDifference": 0}},
      {"$lookup": {"from": "ZTF_alerts_aux", "localField": "objectId", "foreignField": "_id", "as": "aux"}},
      {"$replaceRoot": {"newRoot": {"$mergeObjects": [{"$arrayElemAt": ["$aux", 0]}, "$$ROOT"]}}},
      {"$project": {"aux": 0}}
    ]
  },

  "ml_models": {
    "braai": {
      "version":  "d6_m9"
    }
  },

  "xmatch": {
    "cone_search_radius": 5,
    "cone_search_unit": "arcsec",
    "catalogs": {
      "2MASS_PSC": {
        "filter": {},
        "projection": {
          "_id": 1,
          "coordinates.radec_str": 1,
          "j_m": 1,
          "h_m": 1,
          "k_m": 1
        }
      },

      "AllWISE": {
        "filter": {},
        "projection": {
          "_id": 1,
          "coordinates.radec_str": 1,
          "w1mpro": 1,
          "w1sigmpro": 1,
          "w2mpro": 1,
          "w2sigmpro": 1,
          "w3mpro": 1,
          "w3sigmpro": 1,
          "w4mpro": 1,
          "w4sigmpro": 1,
          "ph_qual": 1
        }
      },

      "Gaia_DR2": {
        "filter": {},
        "projection": {
          "_id": 1,
          "coordinates.radec_str": 1,
          "parallax": 1,
          "parallax_error": 1,
          "phot_g_mean_mag": 1,
          "phot_bp_mean_mag": 1,
          "phot_rp_mean_mag": 1
        }
      },

      "Gaia_DR2_WD": {
        "filter": {},
        "projection": {
          "_id": 1,
          "coordinates.radec_str": 1,
          "White_dwarf_name": 1,
          "Pwd": 1,
          "Pwd_correction": 1,
          "SDSS_name": 1,
          "Teff": 1,
          "eTeff": 1
        }
      },

      "GALEX": {
        "filter": {},
        "projection": {
          "_id": 0,
          "name": 1,
          "coordinates.radec_str": 1,
          "FUVmag": 1,
          "e_FUVmag": 1,
          "NUVmag": 1,
          "e_NUVmag": 1
        }
      },

      "IPHAS_DR2": {
        "filter": {},
        "projection": {
          "_id": 0,
          "name": 1,
          "coordinates.radec_str": 1,
          "r": 1,
          "rErr": 1,
          "i": 1,
          "iErr": 1,
          "ha": 1,
          "haErr": 1
        }
      },

      "LAMOST_DR5_v3": {
        "filter": {},
        "projection": {
          "_id": 1,
          "coordinates.radec_str": 1,
          "mjd": 1,
          "snru": 1,
          "snrg": 1,
          "snrr": 1,
          "snri": 1,
          "snrz": 1,
          "objtype": 1,
          "class": 1,
          "subclass":  1
        }
      },

      "PS1_DR1": {
        "filter": {},
        "projection": {
          "_id": 1, "coordinates.radec_str": 1,
          "gMeanPSFMag": 1, "gMeanPSFMagErr": 1,
          "rMeanPSFMag": 1, "rMeanPSFMagErr": 1,
          "iMeanPSFMag": 1, "iMeanPSFMagErr": 1,
          "zMeanPSFMag": 1, "zMeanPSFMagErr": 1,
          "yMeanPSFMag": 1, "yMeanPSFMagErr": 1
        }
      }
    }
  },

  "misc": {
    "post_to_skyportal": true,
    "supported_penquins_versions": ["2.0.0", "2.0.1", "2.0.2"],
    "query_expiration_interval": 5,
    "max_time_ms": 300000,
    "logging_level": "debug"
  }
}